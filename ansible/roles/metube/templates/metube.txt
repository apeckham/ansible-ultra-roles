# Build Angular app locally because it takes a lot of ram
curl -OL https://github.com/alexta69/metube/archive/refs/heads/master.zip
unzip master.zip
docker run -v ./metube-master:/build --entrypoint '' -ti node:lts-alpine sh -c 'cd /build/ui && npm ci && node_modules/.bin/ng build --configuration production'
rm -rf metube-master/ui/node_modules metube-master/ui/.angular
scp -r metube-master ultra:

# On ultra
pip install pipenv
pipenv install
openssl rand -base64 12 | tee >(htpasswd -i -c .htpasswd $USER)
